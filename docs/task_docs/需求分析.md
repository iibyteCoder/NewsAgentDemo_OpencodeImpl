# 新闻资讯收集智能体系统 - 需求分析

## 一、项目背景与目标

### 1.1 项目目标

实现一个智能新闻资讯收集系统，通过 agent 自主搜集用户指定类型的新闻资讯，并整合为结构化的资讯报告。

### 1.2 核心价值

- **自动化**：从信息收集到报告产出全流程无人工干预
- **智能化**：理解自然语言需求，自动分类和摘要
- **结构化**：生成清晰的文件夹组织和报告格式
- **可追溯**：每条新闻都有明确的来源和时效保证

---

## 二、功能需求（分等级）

### 🟢 C级：基础新闻收集

#### 用户场景

**场景1**：用户想要了解今日体育新闻

```
用户输入: "帮我收集体育运动类资讯"
系统输出: report/ 文件夹，包含今日的体育新闻
```

#### 功能点

1. **自然语言理解**
   - 识别新闻类型（如：体育运动、国际政治、娱乐新闻）
   - 理解单一类别需求

2. **信息获取**
   - 从互联网搜索指定类型新闻
   - 获取新闻详细内容（标题、正文、图片、来源）

3. **时效验证**
   - 确保新闻是**今日**发布的
   - 过滤非今日内容

4. **报告生成**
   - 生成文件夹：`report/`
   - 生成目录文件：`index.md`
   - 生成新闻文件：`新闻1.md`, `新闻2.md` ...

#### 新闻文件格式要求

```markdown
# 标题

## 摘要

简短摘要内容...

## 内容

新闻详细内容...

## 来源

- URL: https://...
- 媒体: xxx新闻网
- 发布时间: 2024-01-27
```

#### 输出结构

```
report/
├── index.md
├── 新闻1.md
├── 新闻2.md
└── ...
```

#### 验收标准

- [ ] 正确识别单一新闻类型
- [ ] 所有新闻都是今日发布
- [ ] 每条新闻包含：标题、摘要、内容、来源
- [ ] 目录文件正确列出所有新闻
- [ ] 全流程无人工干预

---

### 🟡 B级：多类型并行处理

#### 用户场景

**场景1**：用户同时关心多个领域

```
用户输入: "帮我收集体育运动和国际政治相关新闻"
系统输出: report/ 文件夹，包含两个分类的独立报告
```

#### 功能点（在C基础上新增）

1. **多类型理解**
   - 同时识别多个新闻类型
   - 分类处理不同类型的新闻

2. **图文并茂**
   - 保存新闻中的图片
   - 图片与新闻内容关联

3. **分类汇总**
   - 每个分类独立汇总
   - 生成分类级别的摘要

4. **性能要求**
   - 多分类并行处理
   - 总处理时间在可控范围（建议 <10分钟）

#### 输出结构

```
report/
├── 体育运动/
│   ├── 资讯汇总与摘要.md
│   ├── index.md
│   ├── 新闻1.md
│   ├── 新闻1.jpg (图片)
│   └── 新闻2.md
├── 国际政治/
│   ├── 资讯汇总与摘要.md
│   ├── index.md
│   └── ...
```

#### 验收标准

- [ ] 支持同时处理2-5个新闻类型
- [ ] 每个分类独立文件夹组织
- [ ] 每个分类有汇总摘要文件
- [ ] 图片正确保存和关联
- [ ] 多分类并行处理，总时间 <10分钟

---

### 🟠 A级：**智能理解与追溯**

#### 用户场景

**场景1**：模糊语言描述

```
用户输入: "我最近在学习人工智能相关知识，请帮我收集相关资讯"
系统输出: 理解用户意图，收集AI相关新闻
```

**场景2**：历史新闻查询

```
用户输入: "帮我收集最近3天的科技新闻"
系统输出: 按日期组织的报告
```

#### 功能点（在B基础上新增）

1. **模糊语言理解**
   - 理解上下文和隐含意图
   - 关键词扩展和关联（"AI" → "人工智能、机器学习、深度学习"）

2. **时间范围理解**
   - "今日" → 今天
   - "最近3天" → 具体日期范围
   - "本周" → 本周日期范围

3. **真实性验证**
   - 交叉验证多个来源
   - 标注可信度等级
   - 提供验证论据

4. **可追溯性**
   - 每条新闻提供原始URL
   - 记录获取时间
   - 记录来源媒体

5. **内部链接**
   - 汇总文件中链接到具体新闻
   - 支持点击跳转

#### 输出结构

```
report/
├── 人工智能/
│   ├── 2024-01-27/
│   │   ├── 资讯汇总与摘要.md (包含链接到下面的新闻)
│   │   ├── index.md
│   │   ├── 新闻1.md
│   │   └── 新闻2.md
│   ├── 2024-01-26/
│   │   └── ...
```

#### 验收标准

- [ ] 能理解模糊语言描述（准确率 >80%）
- [ ] 支持指定日期范围
- [ ] 按日期+分类二维组织
- [ ] 汇总文件包含可点击链接
- [ ] 新闻真实性验证通过率 >90%
- [ ] 所有新闻可追溯到原始来源

---

### 🔴 S级：深度分析与预测

#### 用户场景

**场景1**：事件发展追踪

```
用户输入: "收集美国大选相关新闻"
系统输出: 不仅收集新闻，还生成美国大选的完整时间轴
```

**场景2**：趋势预测

```
用户输入: "收集国际金价相关新闻"
系统输出: 包含金价变化趋势分析和未来预测
```

#### 功能点（在A基础上新增）

1. **关键点时间轴**
   - 提取所有关键事件
   - 按时间顺序排列
   - 标注关键转折点
   - 关联相关新闻

2. **事件推理与预测**
   - 基于历史数据识别趋势
   - 预测未来发展方向
   - 提供预测理由和依据
   - 标注预测置信度

3. **完整发展脉络**
   - 从事件起点追踪到今日
   - 展示因果关系
   - 标注影响范围

#### 输出文件（新增）

```
report/
├── 国际政治/
│   ├── 2024-01-27/
│   │   ├── 资讯汇总与摘要.md
│   │   ├── 事件时间轴.md (新增)
│   │   ├── 趋势预测.md (新增)
│   │   ├── index.md
│   │   ├── 新闻1.md
│   │   └── 新闻2.md
```

#### 时间轴文件格式示例

```markdown
# 美国大选事件时间轴

## 2024-01-15

- **事件**: 特朗普赢得艾奥瓦州初选
- **影响**: 共和党初选正式开始
- **相关新闻**: [新闻1](./新闻1.md), [新闻2](./新闻2.md)
- **重要性**: ⭐⭐⭐⭐⭐

## 2024-01-23

- **事件**: 新罕布什尔州初选
  ...
```

#### 预测文件格式示例

```markdown
# 国际金价趋势预测

## 当前态势

- 近期金价持续上涨
- 主要驱动因素：美联储降息预期、地缘政治紧张

## 未来趋势预测

### 预测1: 未来1个月金价将继续上涨

- **置信度**: 75%
- **理由**:
  1. 美联储可能3月降息
  2. 中东局势持续紧张
  3. 各国央行持续增持黄金
- **风险因素**: 美联储推迟降息

### 预测2: 年底金价可能突破历史新高

- **置信度**: 60%
- **理由**: ...
```

#### 验收标准

- [ ] 时间轴准确反映事件发展顺序
- [ ] 关键事件不遗漏
- [ ] 预测有合理依据（基于历史数据）
- [ ] 预测包含置信度评估
- [ ] 完整追踪事件发展脉络
- [ ] 时间轴和预测文件格式正确

---

## 三、非功能需求

### 3.1 性能要求

- **C级**: 单类型新闻收集 < 5分钟
- **B级**: 多类型并行处理 < 10分钟
- **A级**: 模糊理解 + 验证 < 15分钟
- **S级**: 完整分析（含时间轴预测）< 20分钟

### 3.2 质量要求

- **准确性**: 新闻分类准确率 > 85%
- **完整性**: 新闻内容完整，无截断
- **时效性**: 仅收集指定时间范围内新闻
- **真实性**: 新闻来源可靠，可验证

### 3.3 可用性要求

- **易用性**: 自然语言交互，无需学习复杂命令
- **可读性**: 报告格式清晰，易于阅读
- **可导航性**: 目录和链接正确，易于跳转

### 3.4 可维护性要求

- **模块化**: 各 agent 职责清晰，易于修改
- **可扩展**: 易于添加新的新闻来源
- **可配置**: 支持配置文件调整参数

---

## 四、边界条件与约束

### 4.1 时间约束

- **C级**: 仅支持"今日"新闻
- **A级**: 支持自定义日期范围（如最近3天、本周等）

### 4.2 语言约束

- **输入**: 中文自然语言
- **输出**: 中文报告

### 4.3 数据源约束

- **新闻源**: 公开可访问的新闻网站
- **反爬虫**: 需要遵守网站的 robots.txt 和访问频率限制

### 4.4 内容约束

- **版权**: 报告中需标注新闻来源，不侵犯版权
- **敏感性**: 需过滤违法违规内容

---

## 五、关键问题与挑战

### 5.1 信息获取

**问题**: 如何获取可靠的新闻源？
**挑战**:

- 新闻网站可能有反爬虫机制
- 不同网站结构不同，需要统一解析
- 需要实时数据，不能依赖缓存

**可能方案**:

- 使用新闻聚合 API
- 使用 MCP Web Reader 工具
- 建立多源备用机制

### 5.2 时效性验证

**问题**: 如何确保新闻是"今日"发布的？
**挑战**:

- 不同网站时间格式不同
- 有些网站没有明确时间戳
- 时区问题

**可能方案**:

- 提取多个时间字段交叉验证
- 使用新闻发布时间而非页面更新时间
- 统一转换为 UTC 时间

### 5.3 真实性验证

**问题**: 如何验证新闻真实性？
**挑战**:

- 无法完全验证内容真实性
- 需要区分事实和观点
- 假新闻可能多个源都有

**可能方案**:

- 优先选择权威媒体
- 交叉验证多个来源
- 标注可信度等级
- 提供验证论据

### 5.4 模糊语言理解

**问题**: 如何理解"最近学习AI相关知识"？
**挑战**:

- 需要推理用户意图
- 需要关键词扩展
- 需要上下文理解

**可能方案**:

- 使用 Few-shot 提示词
- 建立知识图谱进行关联
- 询问用户澄清

### 5.5 时间轴构建（S级）

**问题**: 如何从分散的新闻中提取时间轴？
**挑战**:

- 不同新闻描述同一事件的角度不同
- 事件之间的因果关系需要推理
- 需要识别关键事件和背景事件

**可能方案**:

- 事件抽取算法
- 实体识别和关系抽取
- 构建事件知识图谱

### 5.6 趋势预测（S级）

**问题**: 如何保证预测的合理性？
**挑战**:

- 预测本质是不确定的
- 需要区分事实和预测
- 需要提供充分的理由

**可能方案**:

- 基于历史数据分析
- 多维度分析（政治、经济、社会）
- 标注预测置信度
- 明确说明预测局限性

---

## 六、已明确的决策

### 6.1 新闻源 ✅

- **方案**: 自行实现 MCP Server
- **说明**:
  - 使用百度搜索引擎查找新闻
  - 使用 Playwright 实现爬虫抓取新闻内容
  - MCP 协议提供新闻抓取服务
- **待确认**:
  - [ ] 是否需要新闻源配置文件？
  - [ ] 如何处理付费内容？

### 6.2 交互方式 ✅

- **方案**: REST API（FastAPI/Flask）
- **说明**: 通过 HTTP POST 请求传递参数
- **参数示例**:

  ```json
  {
    "query": "收集体育运动和国际政治相关新闻",
    "date_range": "today",
    "level": "B"
  }
  ```

- **待确认**:
  - [ ] 具体的 API 端点设计？
  - [ ] 认证机制？
  - [ ] 异步任务处理（可能需要长时间）？

### 6.3 图片处理 ✅

- **方案**: 使用原图 URL
- **说明**: 报告中直接引用原始图片 URL，不下载到本地

### 6.4 数据存储 ✅

- **方案**: report_XXX 格式
- **说明**:
  - 每次执行生成独立文件夹 `report_XXX/`
  - 每次执行前清空历史报告目录
  - 报告永久保留
  - 例如: `backend/report_20240127_153045/`

### 6.5 报告格式 ✅

- **方案**: 使用模板
- **说明**: 报告内容基于模板生成，确保格式统一

---

## 七、各等级对比总结

| 维度           | C级        | B级        | A级                 | S级                |
| -------------- | ---------- | ---------- | ------------------- | ------------------ |
| **输入复杂度** | 单一类型   | 多类型     | 模糊语言 + 时间范围 | 同A级              |
| **输出结构**   | 单层文件夹 | 分类文件夹 | 分类 + 日期文件夹   | 同A级 + 时间轴文件 |
| **内容质量**   | 基础       | 图文并茂   | 真实性验证          | 同A级 + 深度分析   |
| **时效性**     | 仅今日     | 仅今日     | 自定义范围          | 同A级              |
| **特色功能**   | 基础收集   | 并行处理   | 智能理解 + 追溯     | 时间轴 + 预测      |
| **实现难度**   | ⭐⭐       | ⭐⭐⭐     | ⭐⭐⭐⭐            | ⭐⭐⭐⭐⭐         |
| **预计时间**   | 5分钟      | 10分钟     | 15分钟              | 20分钟             |

---

## 八、下一步

需求分析阶段待完成：

1. [ ] 明确新闻源和获取方式
2. [ ] 明确交互方式和界面
3. [ ] 明确数据存储方案
4. [ ] 明确非功能需求的具体指标
5. [ ] 与用户确认需求理解是否正确
